<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Data Manipulation Functions</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Data Manipulation Functions</h1>



<div id="transpose" class="section level2">
<h2>Transpose</h2>
<p>There are several functions in base R to pivot data. These include
the <code>t()</code> and <code>reshape()</code> functions. There are
also well-designed functions in the <strong>tidyverse</strong> for
transposing data. Nevertheless, some users will prefer the syntax of
<code>proc_transpose</code>. This function provides control over output
column naming, and an intuitive set of parameters.</p>
<p>To explore <code>proc_transpose</code>, let’s first create some
sample data:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Create input data</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">text =</span> <span class="st">&#39;</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="st">                  Name    Subject   Semester1  Semester2</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="st">                  Samma   Maths     96             94</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="st">                  Sandy   English     76             51</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="st">                  Devesh    German    76             95</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="st">                  Rakesh    Maths       50             63</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="st">                  Priya   English     62             80</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="st">                  Kranti    Maths       92             92</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="st">                  William   German    87             75&#39;</span>)</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="co"># View data</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>dat</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="co">#      Name Subject Semester1 Semester2</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="co"># 1   Samma   Maths        96        94</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="co"># 2   Sandy English        76        51</span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="co"># 3  Devesh  German        76        95</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="co"># 4  Rakesh   Maths        50        63</span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a><span class="co"># 5   Priya English        62        80</span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a><span class="co"># 6  Kranti   Maths        92        92</span></span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a><span class="co"># 7 William  German        87        75</span></span></code></pre></div>
<div id="default-transpose" class="section level3">
<h3>Default Transpose</h3>
<p>The <code>proc_tranpose</code> function may be executed without any
parameters. The default usage will tranpose all numeric variables and
construct generic column names for the new columns:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># No parameters</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">proc_transpose</span>(dat)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co"># View result</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>res</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co">#        NAME COL1 COL2 COL3 COL4 COL5 COL6 COL7</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co"># 1 Semester1   96   76   76   50   62   92   87</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co"># 2 Semester2   94   51   95   63   80   92   75</span></span></code></pre></div>
<p>If you didn’t want all numeric variables transposed, you could
specify which variable(s) to transpose using the <code>var</code>
parameter. Multiple variables can be passed as a vector:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># Var parameter</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">proc_transpose</span>(dat, <span class="at">var =</span> <span class="st">&quot;Semester1&quot;</span>)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co"># View result</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>res</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="co">#        NAME COL1 COL2 COL3 COL4 COL5 COL6 COL7</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="co"># 1 Semester1   96   76   76   50   62   92   87</span></span></code></pre></div>
</div>
<div id="prefix-and-suffix" class="section level3">
<h3>Prefix and Suffix</h3>
<p>You may control the output column names using the
<code>prefix</code>, <code>suffix</code>, and <code>name</code>
parameters. The <code>prefix</code> and <code>suffix</code> will be used
to construct the new transposed column names. The <code>name</code>
parameter value will be used as the name of the generic “NAME” column,
which identify the <code>var</code> parameter values:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># With prefix</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">proc_transpose</span>(dat, <span class="at">name =</span> VarName, <span class="at">prefix =</span> Student)</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co"># View result</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>res</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>    VarName Student1 Student2 Student3 Student4 Student5 Student6 Student7</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="dv">1</span> Semester1       <span class="dv">96</span>       <span class="dv">76</span>       <span class="dv">76</span>       <span class="dv">50</span>       <span class="dv">62</span>       <span class="dv">92</span>       <span class="dv">87</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="dv">2</span> Semester2       <span class="dv">94</span>       <span class="dv">51</span>       <span class="dv">95</span>       <span class="dv">63</span>       <span class="dv">80</span>       <span class="dv">92</span>       <span class="dv">75</span></span></code></pre></div>
<p>Here is the same function call with a <code>suffix</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># With suffix</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">proc_transpose</span>(dat, <span class="at">name =</span> VarName, <span class="at">prefix =</span> S, <span class="at">suffix =</span> Score)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="co"># View result</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>res</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>    VarName S1Score S2Score S3Score S4Score S5Score S6Score S7Score</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="dv">1</span> Semester1      <span class="dv">96</span>      <span class="dv">76</span>      <span class="dv">76</span>      <span class="dv">50</span>      <span class="dv">62</span>      <span class="dv">92</span>      <span class="dv">87</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="dv">2</span> Semester2      <span class="dv">94</span>      <span class="dv">51</span>      <span class="dv">95</span>      <span class="dv">63</span>      <span class="dv">80</span>      <span class="dv">92</span>      <span class="dv">75</span></span></code></pre></div>
<p>Note that since a variable name in R cannot start with a number, some
sort of prefix is required.</p>
</div>
<div id="name-columns-from-data" class="section level3">
<h3>Name Columns From Data</h3>
<p>If your data contains a column with appropriate labels for the
transposed columns, you can assign it to the <code>id</code> parameter.
The <code>id</code> values will then be used for the new column
names.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Assign column names from data</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">proc_transpose</span>(dat, <span class="at">name =</span> VarName, <span class="at">id =</span> Name)</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co"># View result</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>res</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>    VarName Samma Sandy Devesh Rakesh Priya Kranti William</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="dv">1</span> Semester1    <span class="dv">96</span>    <span class="dv">76</span>     <span class="dv">76</span>     <span class="dv">50</span>    <span class="dv">62</span>     <span class="dv">92</span>      <span class="dv">87</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="dv">2</span> Semester2    <span class="dv">94</span>    <span class="dv">51</span>     <span class="dv">95</span>     <span class="dv">63</span>    <span class="dv">80</span>     <span class="dv">92</span>      <span class="dv">75</span></span></code></pre></div>
<p>Using two <code>id</code> parameters tells the function that you want
columns that are combinations of the two variables:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># Two id variables</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">proc_transpose</span>(dat, <span class="at">id =</span> <span class="fu">v</span>(Name, Subject))</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>res</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="co">#        NAME Samma.Maths Sandy.English Devesh.German Rakesh.Maths Priya.English Kranti.Maths William.German</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co"># 1 Semester1          96            76            76           50            62           92             87</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="co"># 2 Semester2          94            51            95           63            80           92             75</span></span></code></pre></div>
<p>The default delimiter shown above is a dot (“.”). The delimiter may
be changed with the <code>delimiter</code> parameter:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># Underscore delimiter</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">proc_transpose</span>(dat, <span class="at">id =</span> <span class="fu">v</span>(Name, Subject), <span class="at">delimiter =</span> <span class="st">&quot;_&quot;</span>)</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>res</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="co">#        NAME Samma_Maths Sandy_English Devesh_German Rakesh_Maths Priya_English Kranti_Maths William_German</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="co"># 1 Semester1          96            76            76           50            62           92             87</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="co"># 2 Semester2          94            51            95           63            80           92             75</span></span></code></pre></div>
</div>
<div id="by-groups" class="section level3">
<h3>By Groups</h3>
<p>The <code>by</code> parameter tells the function to group by the
<code>by</code> variable before transposing. As you can see below, the
<code>by</code> varible is then retained on the output dataset so you
can identify which rows belong to which group.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># By variable</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">proc_transpose</span>(dat, <span class="at">by =</span> Name, <span class="at">id =</span> Subject, <span class="at">name =</span> Semester)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co"># View result</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>res</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co">#       Name  Semester German English Maths</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="co"># 1   Devesh Semester1     76      NA    NA</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="co"># 2   Devesh Semester2     95      NA    NA</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="co"># 3   Kranti Semester1     NA      NA    92</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="co"># 4   Kranti Semester2     NA      NA    92</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="co"># 5    Priya Semester1     NA      62    NA</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="co"># 6    Priya Semester2     NA      80    NA</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="co"># 7   Rakesh Semester1     NA      NA    50</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="co"># 8   Rakesh Semester2     NA      NA    63</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="co"># 9    Samma Semester1     NA      NA    96</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a><span class="co"># 10   Samma Semester2     NA      NA    94</span></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a><span class="co"># 11   Sandy Semester1     NA      76    NA</span></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a><span class="co"># 12   Sandy Semester2     NA      51    NA</span></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a><span class="co"># 13 William Semester1     87      NA    NA</span></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a><span class="co"># 14 William Semester2     75      NA    NA </span></span></code></pre></div>
<p>The <code>by</code> parameter is a valuable feature of
<code>proc_transpose</code>. The by variable can have a significant
effect on the shape of the output data. Let’s see what happens when we
use a different by variable.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># By variable</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">proc_transpose</span>(dat, <span class="at">by =</span> Subject, <span class="at">id =</span> Name)</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co">#   Subject      NAME Sandy Priya Devesh William Samma Rakesh Kranti</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="co"># 1 English Semester1    76    62     NA      NA    NA     NA     NA</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co"># 2 English Semester2    51    80     NA      NA    NA     NA     NA</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="co"># 3  German Semester1    NA    NA     76      87    NA     NA     NA</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="co"># 4  German Semester2    NA    NA     95      75    NA     NA     NA</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="co"># 5   Maths Semester1    NA    NA     NA      NA    96     50     92</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="co"># 6   Maths Semester2    NA    NA     NA      NA    94     63     92</span></span></code></pre></div>
<p>Now let’s use two by variables:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># Two by variables</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">proc_transpose</span>(dat, <span class="at">by =</span> <span class="fu">v</span>(Name, Subject))</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co"># View results</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>res</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="co">#       Name Subject      NAME COL1</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="co"># 1    Priya English Semester1   62</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="co"># 2    Priya English Semester2   80</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="co"># 3    Sandy English Semester1   76</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="co"># 4    Sandy English Semester2   51</span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="co"># 5   Devesh  German Semester1   76</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="co"># 6   Devesh  German Semester2   95</span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="co"># 7  William  German Semester1   87</span></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="co"># 8  William  German Semester2   75</span></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="co"># 9   Kranti   Maths Semester1   92</span></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a><span class="co"># 10  Kranti   Maths Semester2   92</span></span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="co"># 11  Rakesh   Maths Semester1   50</span></span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a><span class="co"># 12  Rakesh   Maths Semester2   63</span></span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a><span class="co"># 13   Samma   Maths Semester1   96</span></span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a><span class="co"># 14   Samma   Maths Semester2   94</span></span></code></pre></div>
<p>By transposing one more time on the results of the previous example,
you can nearly restore the original data frame.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co"># Restore original data shape</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>res2 <span class="ot">&lt;-</span> <span class="fu">proc_transpose</span>(res, <span class="at">by =</span> <span class="fu">v</span>(Name, Subject), <span class="at">id =</span> NAME)</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="co"># View results</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>res2[ , <span class="fu">c</span>(<span class="st">&quot;Name&quot;</span>, <span class="st">&quot;Subject&quot;</span>, <span class="st">&quot;Semester1&quot;</span>, <span class="st">&quot;Semester2&quot;</span>)]</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">#      Name Subject Semester1 Semester2</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="co"># 1   Priya English        62        80</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="co"># 2   Sandy English        76        51</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="co"># 3  Devesh  German        76        95</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="co"># 4 William  German        87        75</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="co"># 5  Kranti   Maths        92        92</span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="co"># 6  Rakesh   Maths        50        63</span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a><span class="co"># 7   Samma   Maths        96        94</span></span></code></pre></div>
</div>
</div>
<div id="sort" class="section level2">
<h2>Sort</h2>
<p>The <code>proc_sort</code> function in the <strong>procs</strong>
package attempts to recreate the most basic functionality of PROC SORT.
The function accepts an input data frame and returns the sorted result.
Before examining the function, first let’s create some sample data:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># Create sample data</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">text =</span> <span class="st">&#39;</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="st">                    ID  Name    Score</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="st">                    1   David    74</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="st">                    2   Sam    45</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="st">                    3   Bane     87</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="st">                    3   Mary     92</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="st">                    4   Dane     23</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="st">                    5   Jenny    87</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="st">                    6   Simran 63</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="st">                    8   Priya    72 </span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a><span class="st">                    1   David    45</span></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a><span class="st">                    2   Ram    54</span></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a><span class="st">                    3   Bane     87</span></span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a><span class="st">                    5   Ken    87&#39;</span>)</span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a><span class="co"># View data</span></span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a>dat</span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a><span class="co">#    ID   Name Score</span></span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a><span class="co"># 1   1  David    74</span></span>
<span id="cb13-21"><a href="#cb13-21" tabindex="-1"></a><span class="co"># 2   2    Sam    45</span></span>
<span id="cb13-22"><a href="#cb13-22" tabindex="-1"></a><span class="co"># 3   3   Bane    87</span></span>
<span id="cb13-23"><a href="#cb13-23" tabindex="-1"></a><span class="co"># 4   3   Mary    92</span></span>
<span id="cb13-24"><a href="#cb13-24" tabindex="-1"></a><span class="co"># 5   4   Dane    23</span></span>
<span id="cb13-25"><a href="#cb13-25" tabindex="-1"></a><span class="co"># 6   5  Jenny    87</span></span>
<span id="cb13-26"><a href="#cb13-26" tabindex="-1"></a><span class="co"># 7   6 Simran    63</span></span>
<span id="cb13-27"><a href="#cb13-27" tabindex="-1"></a><span class="co"># 8   8  Priya    72</span></span>
<span id="cb13-28"><a href="#cb13-28" tabindex="-1"></a><span class="co"># 9   1  David    45</span></span>
<span id="cb13-29"><a href="#cb13-29" tabindex="-1"></a><span class="co"># 10  2    Ram    54</span></span>
<span id="cb13-30"><a href="#cb13-30" tabindex="-1"></a><span class="co"># 11  3   Bane    87</span></span>
<span id="cb13-31"><a href="#cb13-31" tabindex="-1"></a><span class="co"># 12  5    Ken    87</span></span></code></pre></div>
<p>Like <code>proc_transpose</code>, the function has a default usage,
which is to sort by all variables:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># Default sort</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">proc_sort</span>(dat)</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co"># View results</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>res</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="co">#    ID   Name Score</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="co"># 9   1  David    45</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="co"># 1   1  David    74</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="co"># 10  2    Ram    54</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="co"># 2   2    Sam    45</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="co"># 3   3   Bane    87</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="co"># 11  3   Bane    87</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="co"># 4   3   Mary    92</span></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a><span class="co"># 5   4   Dane    23</span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a><span class="co"># 6   5  Jenny    87</span></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a><span class="co"># 12  5    Ken    87</span></span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a><span class="co"># 7   6 Simran    63</span></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a><span class="co"># 8   8  Priya    72</span></span></code></pre></div>
<div id="sort-by" class="section level3">
<h3>Sort By</h3>
<p>To sort by a specific variable, you can use the <code>by</code>
parameter:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># Sort By</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">proc_sort</span>(dat, <span class="at">by =</span> Score)</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="co"># View results</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>res</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="co">#    ID   Name Score</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="co"># 5   4   Dane    23</span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="co"># 2   2    Sam    45</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a><span class="co"># 9   1  David    45</span></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="co"># 10  2    Ram    54</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a><span class="co"># 7   6 Simran    63</span></span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a><span class="co"># 8   8  Priya    72</span></span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a><span class="co"># 1   1  David    74</span></span>
<span id="cb15-14"><a href="#cb15-14" tabindex="-1"></a><span class="co"># 3   3   Bane    87</span></span>
<span id="cb15-15"><a href="#cb15-15" tabindex="-1"></a><span class="co"># 6   5  Jenny    87</span></span>
<span id="cb15-16"><a href="#cb15-16" tabindex="-1"></a><span class="co"># 11  3   Bane    87</span></span>
<span id="cb15-17"><a href="#cb15-17" tabindex="-1"></a><span class="co"># 12  5    Ken    87</span></span>
<span id="cb15-18"><a href="#cb15-18" tabindex="-1"></a><span class="co"># 4   3   Mary    92</span></span></code></pre></div>
<p>You can also sort by two variables:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co"># Sort By</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">proc_sort</span>(dat, <span class="at">by =</span> <span class="fu">v</span>(Score, Name))</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="co"># View results</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>res</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="co">#    ID   Name Score</span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a><span class="co"># 5   4   Dane    23</span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a><span class="co"># 9   1  David    45</span></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a><span class="co"># 2   2    Sam    45</span></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a><span class="co"># 10  2    Ram    54</span></span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a><span class="co"># 7   6 Simran    63</span></span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a><span class="co"># 8   8  Priya    72</span></span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a><span class="co"># 1   1  David    74</span></span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a><span class="co"># 3   3   Bane    87</span></span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a><span class="co"># 11  3   Bane    87</span></span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a><span class="co"># 6   5  Jenny    87</span></span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a><span class="co"># 12  5    Ken    87</span></span>
<span id="cb16-18"><a href="#cb16-18" tabindex="-1"></a><span class="co"># 4   3   Mary    92</span></span></code></pre></div>
<p>Notice that when the scores are tied, the data is now sorted
alphabetically by name.</p>
</div>
<div id="sort-order" class="section level3">
<h3>Sort Order</h3>
<p>To put the highest scores on top, you can sort descending using the
<code>order</code> parameter.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co"># Sort By</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">proc_sort</span>(dat, <span class="at">by =</span> Score, <span class="at">order =</span> descending)</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="co"># View results</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>res</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="co">#    ID   Name Score</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a><span class="co"># 4   3   Mary    92</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a><span class="co"># 3   3   Bane    87</span></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a><span class="co"># 6   5  Jenny    87</span></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a><span class="co"># 11  3   Bane    87</span></span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a><span class="co"># 12  5    Ken    87</span></span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a><span class="co"># 1   1  David    74</span></span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a><span class="co"># 8   8  Priya    72</span></span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a><span class="co"># 7   6 Simran    63</span></span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a><span class="co"># 10  2    Ram    54</span></span>
<span id="cb17-16"><a href="#cb17-16" tabindex="-1"></a><span class="co"># 2   2    Sam    45</span></span>
<span id="cb17-17"><a href="#cb17-17" tabindex="-1"></a><span class="co"># 9   1  David    45</span></span>
<span id="cb17-18"><a href="#cb17-18" tabindex="-1"></a><span class="co"># 5   4   Dane    23</span></span></code></pre></div>
<p>The <code>order</code> instructions can be abbreviated “a” for
ascending and “d” for descending. These abbreviations are convenient
when there is more than one <code>by</code> variable.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co"># Sort By</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">proc_sort</span>(dat, <span class="at">by =</span> <span class="fu">v</span>(Score, Name), <span class="at">order =</span> <span class="fu">v</span>(d, a))</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="co"># View results</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>res</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="co">#    ID   Name Score</span></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="co"># 4   3   Mary    92</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="co"># 3   3   Bane    87</span></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="co"># 11  3   Bane    87</span></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="co"># 6   5  Jenny    87</span></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="co"># 12  5    Ken    87</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a><span class="co"># 1   1  David    74</span></span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a><span class="co"># 8   8  Priya    72</span></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a><span class="co"># 7   6 Simran    63</span></span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a><span class="co"># 10  2    Ram    54</span></span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a><span class="co"># 9   1  David    45</span></span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a><span class="co"># 2   2    Sam    45</span></span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a><span class="co"># 5   4   Dane    23</span></span></code></pre></div>
</div>
<div id="keep" class="section level3">
<h3>Keep</h3>
<p>The <code>keep</code> parameter allows you to select only some of the
variables for the output dataset:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co"># Keep Name and Score only</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">proc_sort</span>(dat, <span class="at">by =</span> Name, <span class="at">keep =</span> <span class="fu">v</span>(Name, Score))</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="co"># View results</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>res</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a><span class="co">#      Name Score</span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="co"># 3    Bane    87</span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a><span class="co"># 11   Bane    87</span></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a><span class="co"># 5    Dane    23</span></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a><span class="co"># 1   David    74</span></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a><span class="co"># 9   David    45</span></span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a><span class="co"># 6   Jenny    87</span></span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a><span class="co"># 12    Ken    87</span></span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a><span class="co"># 4    Mary    92</span></span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a><span class="co"># 8   Priya    72</span></span>
<span id="cb19-16"><a href="#cb19-16" tabindex="-1"></a><span class="co"># 10    Ram    54</span></span>
<span id="cb19-17"><a href="#cb19-17" tabindex="-1"></a><span class="co"># 2     Sam    45</span></span>
<span id="cb19-18"><a href="#cb19-18" tabindex="-1"></a><span class="co"># 7  Simran    63</span></span></code></pre></div>
</div>
<div id="options" class="section level3">
<h3>Options</h3>
<p>Another convenient feature of <code>proc_sort</code> is the
<code>nodupkey</code> option. This option will eliminate duplicates
based on the unique combination of values of the <code>by</code>
variables. For instance, to get a unique list of students, you could use
<code>keep</code> and <code>options = nodupkey</code>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co"># Keep and Nodupkey</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">proc_sort</span>(dat, <span class="at">by =</span> Name, <span class="at">keep =</span> Name, <span class="at">options =</span> nodupkey)</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="co"># View results</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>res</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a><span class="co">#      Name</span></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a><span class="co"># 3    Bane</span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a><span class="co"># 5    Dane</span></span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a><span class="co"># 1   David</span></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a><span class="co"># 6   Jenny</span></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a><span class="co"># 12    Ken</span></span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a><span class="co"># 4    Mary</span></span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a><span class="co"># 8   Priya</span></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a><span class="co"># 10    Ram</span></span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a><span class="co"># 2     Sam</span></span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a><span class="co"># 7  Simran</span></span></code></pre></div>
<p>There is also a <code>dupkey</code> option to retain only records
with duplicate key values. This feature would allow you to easily find
students who took the exam twice, and show the scores for each
attempt.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="co"># Keep and dupkey</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">proc_sort</span>(dat, <span class="at">by =</span> Name, <span class="at">options =</span> dupkey)</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="co"># View results</span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>res</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="co">#   ID  Name Score</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a><span class="co"># 1  3  Bane    87</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a><span class="co"># 2  3  Bane    87</span></span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a><span class="co"># 3  1 David    74</span></span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a><span class="co"># 4  1 David    45</span></span></code></pre></div>
<p>Note that the above <code>dupkey</code> option is not available in
SAS®. This option has been added to the <code>proc_sort()</code>
function for convenience.</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
